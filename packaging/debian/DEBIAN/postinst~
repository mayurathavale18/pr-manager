#!/usr/bin/env bash
set -e

# Check if GitHub CLI is installed
if ! command -v gh &> /dev/null; then
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "âš ï¸  GitHub CLI (gh) is not installed!"
    echo ""
    echo "pr-script requires GitHub CLI to function properly."
    echo "Please install it using one of these methods:"
    echo ""
    echo "ğŸ“¦ Ubuntu/Debian:"
    echo "   sudo apt update && sudo apt install gh"
    echo ""
    echo "ğŸ”§ Or install from official repository:"
    echo "   curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg | sudo dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg"
    echo "   echo \"deb [arch=\$(dpkg --print-architecture) signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main\" | sudo tee /etc/apt/sources.list.d/github-cli.list > /dev/null"
    echo "   sudo apt update && sudo apt install gh"
    echo ""
    echo "After installation, authenticate with: gh auth login"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
fi

# Make sure the script is executable
chmod +x /usr/bin/pr-script

echo "âœ… pr-script has been successfully installed!"
echo "ğŸ“– Usage: pr-script <PR_NUMBER> or pr-script --help"
echo "ğŸ“š Documentation: /usr/share/doc/pr-script/README.md"

exit 0
